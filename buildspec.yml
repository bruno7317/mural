version: 0.2

phases:
  install:
    commands:
      - echo "Installing NPM dependencies..."
      - npm install
      - echo "Installing Angular CLI..."
      - npm install -g @angular/cli

  build:
    commands:
      - echo "Building the Angular application with production configuration..."
      - ng build --configuration production --delete-output-path

  post_build:
    commands:
      - echo "Moving build files to root for deployment..."
      - mkdir -p output
      - cp -r dist/browser/* output/

artifacts:
  base-directory: output
  files:
    - '**/*'
  discard-paths: yes  # Discards any sub-folder structure and uploads files directly to S3 root
